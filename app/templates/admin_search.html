{% extends "base.html" %}
{% block content %}
<script type=text/javascript>
  $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>
  <style type="text/css">
  /*
  * Base structure
  */
  /* Move down content because we have a fixed navbar that is 50px tall */
  body {
  padding-top: 50px;
  }
  /*
  * Global add-ons
  */
  .sub-header {
  padding-bottom: 10px;
  border-bottom: 1px solid #eee;
  }
  /*
  * Top navigation
  * Hide default border to remove 1px line.
  */
  .navbar-fixed-top {
  border: 0;
  }
  /*
  * Sidebar
  */
  /* Hide for mobile, show later */
  .sidebar {
  display: none;
  }
  @media (min-width: 768px) {
  .sidebar {
  position: fixed;
  top: 51px;
  bottom: 0;
  left: 0;
  z-index: 1000;
  display: block;
  padding: 20px;
  overflow-x: hidden;
  overflow-y: auto; /* Scrollable contents if viewport is shorter than content. */
  background-color: #f5f5f5;
  border-right: 1px solid #eee;
  }
  }
  /* Sidebar navigation */
  .nav-sidebar {
  margin-right: -21px; /* 20px padding + 1px border */
  margin-bottom: 20px;
  margin-left: -20px;
  }
  .nav-sidebar > li > a {
  padding-right: 20px;
  padding-left: 20px;
  }
  .nav-sidebar > .active > a,
  .nav-sidebar > .active > a:hover,
  .nav-sidebar > .active > a:focus {
  color: #fff;
  background-color: #428bca;
  }
  /*
  * Main content
  */
  .main {
  padding: 20px;
  }
  @media (min-width: 768px) {
  .main {
  padding-right: 40px;
  padding-left: 40px;
  }
  }
  .main .page-header {
  margin-top: 10;
  }
  /*
  * Placeholder dashboard ideas
  */
  .placeholders {
  margin-bottom: 30px;
  text-align: center;
  }
  .placeholders h4 {
  margin-bottom: 0;
  }
  .placeholder {
  margin-bottom: 20px;
  }
  .placeholder img {
  display: inline-block;
  border-radius: 50%;
  }
  </style>
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-3 col-md-2 sidebar">
        <ul class="nav nav-sidebar">
          <li><a href={{url_for('admins_review',admin_id=admin_id)}}>素质分审核</a></li>
          <li class="active"><a href={{url_for('admins_search',admin_id=admin_id)}}>素质分查询</a></li>
          <li><a href={{url_for('admins_edit',admin_id=admin_id)}}>添加修改规则</a></li>
          <li><a href="">下载</a></li>
        </ul>
        <ul class="nav nav-sidebar">
          <li><a href={{url_for('logout')}}>退出</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
    <body>
      <h1 class="page-header">查询结果</h1>
      <form class="form-horizontal">
        <fieldset>
          <div id="legend" class="">
          </div>
          <div class="control-group">
            <!-- Text input-->
            <label class="control-label" for="input01">学号</label>
            <div class="controls">
              <input name="campID",type="text" placeholder="130200" class="input-xlarge">
            </div>
          </div>
          <div class="control-group">
            <label class="control-label"></label>
            <!-- Button -->
            <div class="controls">
              <button id="OnSearch" class="btn btn-success">查询</button>
            </div>
          </div>
        </fieldset>
      </form>
      <table class="flexme3" style="display: none"></table>
      <ul></ul>

    </body>
  </div>


<script type="text/javascript">
  $(function () {
            $("#OnSearch").bind("click", function (){
               $.getJSON($SCRIPT_ROOT+"/_search",
                {
                  campID: $('input[name="campID"]').val(),
                },
                function(data){
                  alert(data)
                  $.each(data, function(index, database) {
                      $("ul").append("<li>" + database + "</li>");
                  });
                });
               return false
            });
        });

  $(".flexme3").flexigrid({
                url : 'post-xml.php',
                dataType : 'xml',
                colModel : [ {
                    display : 'ISO',
                    name : 'iso',
                    width : 40,
                    sortable : true,
                    align : 'center'
                    }, {
                        display : 'Name',
                        name : 'name',
                        width : 180,
                        sortable : true,
                        align : 'left'
                    }, {
                        display : 'Printable Name',
                        name : 'printable_name',
                        width : 120,
                        sortable : true,
                        align : 'left'
                    }, {
                        display : 'ISO3',
                        name : 'iso3',
                        width : 130,
                        sortable : true,
                        align : 'left',
                        hide : true
                    }, {
                        display : 'Number Code',
                        name : 'numcode',
                        width : 80,
                        sortable : true,
                        align : 'right'
                } ],
                buttons : [ {
                    name : 'Add',
                    bclass : 'add',
                    onpress : test
                    }, {
                        name : 'Delete',
                        bclass : 'delete',
                        onpress : test
                    }, {
                        separator : true
                } ],
                searchitems : [ {
                    display : 'ISO',
                    name : 'iso'
                    }, {
                        display : 'Name',
                        name : 'name',
                        isdefault : true
                } ],
                sortname : "iso",
                sortorder : "asc",
                usepager : true,
                title : '素质分统计',
                useRp : true,
                rp : 15,
                showTableToggleBtn : true,
                width : 700,
                height : 200
            });

            function test(com, grid) {
                if (com == 'Delete') {
                    confirm('Delete ' + $('.trSelected', grid).length + ' items?')
                } else if (com == 'Add') {
                    alert('Add New Item');
                }
            }
</script>
{% endblock %}
