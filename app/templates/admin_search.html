{% extends "base.html" %}
{% block content %}
<script type=text/javascript>
  $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>
  <style type="text/css">
  /*
  * Base structure
  */
  /* Move down content because we have a fixed navbar that is 50px tall */
  body {
  padding-top: 50px;
  }
  /*
  * Global add-ons
  */
  .sub-header {
  padding-bottom: 10px;
  border-bottom: 1px solid #eee;
  }
  /*
  * Top navigation
  * Hide default border to remove 1px line.
  */
  .navbar-fixed-top {
  border: 0;
  }
  /*
  * Sidebar
  */
  /* Hide for mobile, show later */
  .sidebar {
  display: none;
  }
  @media (min-width: 768px) {
  .sidebar {
  position: fixed;
  top: 51px;
  bottom: 0;
  left: 0;
  z-index: 1000;
  display: block;
  padding: 20px;
  overflow-x: hidden;
  overflow-y: auto; /* Scrollable contents if viewport is shorter than content. */
  background-color: #f5f5f5;
  border-right: 1px solid #eee;
  }
  }
  /* Sidebar navigation */
  .nav-sidebar {
  margin-right: -21px; /* 20px padding + 1px border */
  margin-bottom: 20px;
  margin-left: -20px;
  }
  .nav-sidebar > li > a {
  padding-right: 20px;
  padding-left: 20px;
  }
  .nav-sidebar > .active > a,
  .nav-sidebar > .active > a:hover,
  .nav-sidebar > .active > a:focus {
  color: #fff;
  background-color: #428bca;
  }
  /*
  * Main content
  */
  .main {
  padding: 20px;
  }
  @media (min-width: 768px) {
  .main {
  padding-right: 40px;
  padding-left: 40px;
  }
  }
  .main .page-header {
  margin-top: 10;
  }
  /*
  * Placeholder dashboard ideas
  */
  .placeholders {
  margin-bottom: 30px;
  text-align: center;
  }
  .placeholders h4 {
  margin-bottom: 0;
  }
  .placeholder {
  margin-bottom: 20px;
  }
  .placeholder img {
  display: inline-block;
  border-radius: 50%;
  }
  </style>
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-3 col-md-2 sidebar">
        <ul class="nav nav-sidebar">
          <li><a href={{url_for('admins_review',admin_id=admin_id)}}>素质分审核</a></li>
          <li class="active"><a href={{url_for('admins_search',admin_id=admin_id)}}>素质分查询</a></li>
          <li><a href={{url_for('admins_edit',admin_id=admin_id)}}>添加修改规则</a></li>
          <li><a href={{url_for('static',filename="学生综合素质考评办法2013-9-4.doc")}}>下载</a></li>
        </ul>
        <ul class="nav nav-sidebar">
          <li><a href={{url_for('logout')}}>退出</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
    <body>
      <h1 class="page-header">素质分查询</h1>

  <div class="row clearfix">
    <div class="col-md-12 column">
<ul class="nav nav-tabs" role="tablist" id="myTab">
  <li role="presentation" class="active"><a href="#home" role="tab" data-toggle="tab">按学号查询</a></li>
  <li role="presentation"><a href="#profile" role="tab" data-toggle="tab">按年级班级查询</a></li>

</ul>
<div class="tab-content">
  <div role="tabpanel" class="tab-pane active" id="home">
    <div class="row clearfix">
        <div class="col-md-6 column ">
          <table class="table" id="student">
            <thead>
              <tr>
                <th>
                  姓名
                </th>
                <th>
                  学号
                </th>
                <th>
                  年级
                </th>
                <th>
                  总分
                </th>
              </tr>
            </thead>
            <tbody>
              <tr class="info">
                <td id="name">

                </td>
                <td id="campID">

                </td>
                <td id="grade">


                </td>
                <td id="sum">

                </td>

              </tr>
            </tbody>
          </table>
          <table class="table" id="score_items">




          </table>
        </div>
        <div class="col-md-6 column">
        </div>
      </div>
      <div class="row clearfix">
        <div class="col-md-6 column">

        <table class="flexme3" style="display: none" id='searchstu'></table>
        </div>
        <div class="col-md-6 column">
        </div>
      </div>
      <div class="row clearfix">
        <div class="col-md-2 column">
          <br>
          <input id="searchcampID" name="campID" type="text" placeholder="学号" class="input-xlarge" >
          <br>
          <br>
          <button id="OnSearch" type="button" class="btn btn-primary btn-default">查询</button>

        </div>
        <div class="col-md-4 column">
        <br>

        </div>
      </div>
  </div>
  <div role="tabpanel" class="tab-pane" id="profile">
<div class="row clearfix">
        <div class="col-md-6 column ">
          <table class="table" id="student">
            <thead>
              <tr>
                <th>
                  姓名
                </th>
                <th>
                  学号
                </th>
                <th>
                  年级
                </th>

                <th>
                  总分
                </th>
              </tr>
            </thead>
            <tbody>
              <tr class="info">
                <td id="name">

                </td>
                <td id="campID">

                </td>
                <td id="grade">



                </td>
                <td id="sum">

                </td>

              </tr>
            </tbody>
          </table>
          <table class="table" id="score_items">




          </table>
        </div>
        <div class="col-md-6 column">
        </div>
      </div>
      <div class="row clearfix">
        <div class="col-md-6 column">

        <table class="flexme3" style="display: none" id='searchstu'></table>
        </div>
        <div class="col-md-6 column">
        </div>
      </div>
      <div class="row clearfix">
        <div class="col-md-2 column">
          <br>
          <input id="searchcampID" name="campID" type="text" placeholder="学号" class="input-xlarge" >
          <br>
          <br>
          <button id="OnSearch" type="button" class="btn btn-primary btn-default">查询</button>

        </div>
        <div class="col-md-4 column">
        <br>

        </div>
      </div>
  </div>
  </div>

</div>

    </div>
  </div>

  </body>
</div>



<script type="text/javascript">

var _value=$("#searchcampID").val()

$('#myTab a').click(function (e) {
  e.preventDefault()
  $(this).tab('show')
})


$(function () {
          $("#OnSearch").bind("click", function (){
            $.get($SCRIPT_ROOT+"/_getStuInfo",{
              campID:$('input[name="campID"]').val()
            },function(data){
              if(data=="无法找到"){
                alert(data)
              }
              else{
                $("#name").html(data.name);
                $("#campID").html(data.campID);
                $("#grade").html(data.grade);
                $("#sum").html(data.sum);

                $("#score_items thead").empty()
                $("#score_items tbody").empty()//获取#score_items下面的tbody


                var thead = "<tr> <th> 申请号 </th> <th> 所属类别 </th> <th> 加分项目 </th> <th> 分值 </th> <th> 时间 </th> <th> 执行标准 </th><th> 审核状态 </th> </tr> "//不能包含<thead>

                  $("#score_items").append(thead)
                $.each(data.items,function() {

                  var tbBody = ""
                  tbBody += "<tr class='warning'><td>" + this.id + "</td>" + "<td>" + this.catagory + "</td>" + "<td>" + this.item_name + "</td>"+"<td>" + this.add + "</td>"+"<td>" + this.time + "</td>"+"<td>" + this.standard + "</td>"+"<td>" + this.status + "</td></tr>";
                  $("#score_items").append(tbBody)
                });
                }
              });

          });
      });

</script>

{% endblock %}
