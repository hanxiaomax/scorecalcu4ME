{% extends "base.html" %}
{% block content %}


  <style type="text/css">
  /*
  * Base structure
  */
  /* Move down content because we have a fixed navbar that is 50px tall */
  body {
  padding-top: 50px;
  }
  /*
  * Global add-ons
  */
  .sub-header {
  padding-bottom: 10px;
  border-bottom: 1px solid #eee;
  }
  /*
  * Top navigation
  * Hide default border to remove 1px line.
  */
  .navbar-fixed-top {
  border: 0;
  }
  /*
  * Sidebar
  */
  /* Hide for mobile, show later */
  .sidebar {
  display: none;
  }
  @media (min-width: 768px) {
  .sidebar {
  position: fixed;
  top: 51px;
  bottom: 0;
  left: 0;
  z-index: 1000;
  display: block;
  padding: 20px;
  overflow-x: hidden;
  overflow-y: auto; /* Scrollable contents if viewport is shorter than content. */
  background-color: #f5f5f5;
  border-right: 1px solid #eee;
  }
  }
  /* Sidebar navigation */
  .nav-sidebar {
  margin-right: -21px; /* 20px padding + 1px border */
  margin-bottom: 20px;
  margin-left: -20px;
  }
  .nav-sidebar > li > a {
  padding-right: 20px;
  padding-left: 20px;
  }
  .nav-sidebar > .active > a,
  .nav-sidebar > .active > a:hover,
  .nav-sidebar > .active > a:focus {
  color: #fff;
  background-color: #428bca;
  }
  /*
  * Main content
  */
  .main {
  padding: 20px;
  }
  @media (min-width: 768px) {
  .main {
  padding-right: 40px;
  padding-left: 40px;
  }
  }
  .main .page-header {
  margin-top: 10;
  }
  /*
  * Placeholder dashboard ideas
  */
  .placeholders {
  margin-bottom: 30px;
  text-align: center;
  }
  .placeholders h4 {
  margin-bottom: 0;
  }
  .placeholder {
  margin-bottom: 20px;
  }
  .placeholder img {
  display: inline-block;
  border-radius: 50%;
  }
  </style>
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-3 col-md-2 sidebar">
        <ul class="nav nav-sidebar">
          <li class="active"><a href="">素质分申请</a></li>
          <li><a href={{url_for('static',filename="学生综合素质考评办法2013-9-4.doc")}}>下载</a></li>
        </ul>
        <ul class="nav nav-sidebar">
          <li><a href={{url_for('logout')}}>退出</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
    <h1 class="page-header">提交申请</h1>
    <body>
      <div class="container">
        <form class="form-horizontal">
          <fieldset>


            <form class="form-horizontal">
              <fieldset>
              <div class="container">
              <div class="row">
              <div class="col-md-4">
              <div class="control-group">
                  <label class="control-label">素质分类别</label>
                  <div class="controls">
                    <!-- Multiple Radios -->
                    <label class="radio">
                      <input type="radio" value="班级工作" name="group" checked="checked">班级工作（此类累加不得超过40分）</label>
                    <label class="radio">
                      <input type="radio" value="院级社团" name="group">院级社团（此类累加不得超过35分）</label>
                    <label class="radio">
                      <input type="radio" value="校级社团" name="group">校级社团（此类累加不得超过35分）</label>
                    <label class="radio">
                      <input type="radio" value="个人荣誉" name="group">个人荣誉（此类累加不得超过50分）</label>
                    <label class="radio">
                      <input type="radio" value="集体荣誉" name="group">集体荣誉（此类累加不得超过50分）</label>
                    <label class="radio">
                      <input type="radio" value="集体活动" name="group">集体活动（此类累加不得超过30分）</label>
                    <label class="radio">
                      <input type="radio" value="其他" name="group">其他（累计不得超过15分）</label>
                    </div>
                  </div></div>
              <div class="col-md-2"> </div>
              <div class="col-md-6">
              <div class="control-group">
                  <!-- Select Basic -->
                  <label class="control-label">加分项目</label>
                  <div class="controls">
                    <select id="apply" class="input-xlarge" size="11">
                      <option value="担任班长">担任班长</option>
                      <option value="担任党支部书记">担任党支部书记</option>
                      <option value="担任其他班委">担任其他班委</option>
                    </select>
                  </div>
                </div>
                </div>
                </div>
                </div>

                <div class="container">
                  <div class="row">
                    <div class="col-md-4">
                        <div class="control-group">
                          <label class="control-label"> </label>
                          <div class="controls">
                            <input class="input-file" id="fileInput" type="file">
                          </div>
                        </div>
                        <div>
                        </div>
                        <div class="control-group">
                            <label class="control-label"> </label>
                                <div class="controls">
                                    <button id="submitbtn" class="btn btn-success">提交</button>
                                </div>
                        </div>
                    </div>
                    <div class="col-md-2"> </div>
                    <div class="col-md-6">

                    </div>
                  </div>
                </div>
            </fieldset>
          </form>
        </fieldset>
      </form>
    </div>
    <h1 class="page-header">我的素质分<small id = "totalscore"></small></h1>

    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <table class="flexme3" style="display: none"></table>
        </div>
        <div class="col-md-4">

        </div>
        <div class="col-md-4">

        </div>
      </div>
    </div>
  </body>
</div>
</div>
<div id="111"></div>



<script type= "text/javascript">
  $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>




<script type="text/javascript">



$("#totalscore").html("总分：15分");

$(function () {

      // var selectedvalue = $("input[name='group']:checked").val();
          $('#submitbtn').bind('click', function () {
            //alert($("#apply option:selected").text())
            $.post($SCRIPT_ROOT+"_sublimtApply",
              {
                catagory:$("input[name='group']:checked").val(),
                name:$("#apply option:selected").text()
              },
              function(){
                alert("提交成功")
                $(".flexme3").flexReload();
              });
            return false//不跳转
          });

      });


$(function(){
        $("input:radio").change(function(){
          var selectedvalue = $("input[name='group']:checked").val();
          $.getJSON("/static/select.json",function(data){
            $("#apply").empty();
              $.each(data,function() {
                if (this.catagory==selectedvalue)
                {
                    $.each(this.subcatagory, function() {
                    $("#apply").append("<option value=this.name>" +  this.name + "</option>");
                    });
                };
      });
    });
  });
});

$(".flexme3").flexigrid({
                url :$SCRIPT_ROOT+"_getMyScore",
                method: 'GET',//should be GET
                dataType : 'json',
                params: [{
                    name: 'campID',
                    value: {{user.campID}}
                  },],
                colModel : [ {
                    display : '所属类别',
                    name : 'catagory',
                    width : 100,

                    sortable : false,
                    align : 'center'
                    }, {
                        display : '加分项目',
                        name : 'item_name',
                        width : 300,
                        sortable : true,
                        align : 'left'
                    }, {
                        display : '分数',
                        name : 'add',
                        width : 50,
                        sortable : true,
                        align : 'center'
                    }, {
                        display : '时间',
                        name : 'time',
                        width : 130,
                        sortable : true,
                        align : 'left',
                        hide : true
                    }, {
                        display : '执行标准',
                        name : 'standard',
                        width : 100,
                        sortable : true,
                        align : 'right'
                },
                {
                        display : '审核状态',
                        name : 'status',
                        width : 80,
                        sortable : true,
                        align : 'right'
                }  ],
                buttons : [
                {
                        name : 'Delete',
                        bclass : 'delete',
                        onpress : test
                    }, {
                        separator : true
                } ],
                searchitems : [ {
                    display : 'ISO',
                    name : 'iso'
                    }, {
                        display : 'Name',
                        name : 'name',
                        isdefault : true
                } ],
                sortname : "iso",
                sortorder : "asc",
                usepager : false,
                title : '我的素质分',
                useRp : true,
                rp : 15,
                showTableToggleBtn : true,
                width : 700,
                height : 200
            });
function test(com, grid) {
                if (com == 'Delete') {
                    confirm('Delete ' + $('.trSelected', grid).length + ' items?')
                } else if (com == 'Add') {
                    alert('Add New Item');
                }
            }
</script>
{% endblock %}
